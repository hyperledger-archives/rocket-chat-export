# ------------------------------------------------------------
# Business Partner Agent
#
# BPA1, ACAPY1, POSTGRES1 are for configuring the full business partner stack
# BPA2, ACAPY2, POSTGRES2 are for configuring the agent & wallet, the frontend/backend (BPA) are to be run in IDEs for development work
# ------------------------------------------------------------

# Specifies the label for this agent. This label is publicized (self-attested) to other agents as part of forming a connection
AGENT1_NAME="abc-inc"
AGENT2_NAME="dev-bpa"

# localhost, ip address, dns name
BPA_HOST=host.docker.internal
BPA_SCHEME=http
BPA_CONFIG_FILES=classpath:application.yml,classpath:schemas.yml,classpath:bcgov-ux.yml,classpath:security-keycloak.yml

BPA1_SERVICE=partner-app
BPA1_PORT=38080
BPA1_DEBUG_PORT=1044

# BPA2 is not stood up in docker-compose... it is meant to run in an ide for development
BPA2_SERVICE=host.docker.internal
BPA2_PORT=48080

# Security
BPA_SECURITY_ENABLED=true
# Default username and password, set if running in production like environments
BPA_BOOTSTRAP_UN=admin
BPA_BOOTSTRAP_PW=changeme

# Run in did:web mode with read only ledger. If set to true ACAPY_READ_ONLY_MODE has to be set as well.
BPA_WEB_MODE=false

# Uni Resolver URL - local instance of uni-resolver
BPA_RESOLVER_URL=https://resolver.stage.economyofthings.io
# The ledger prefix that is configured with the Uni Resolver
BPA_DID_PREFIX=did:sov:iil:
# These schemas need to be registered on the ledger
# If they are created or changed, then they will need to be registered again.
BPA_SCHEMA_BANK_ID="2chG7DuwJiKCXbScynLGZ6:2:bank_account:1.5"
BPA_SCHEMA_COMREG_ID="UddsJpBYawZuKoREVGETps:2:commercialregister:1.5"

# The Ledger Explorer
BPA_LEDGER_BROWSER=https://indy-test.bosch-digital.de

# Optional: If set bpa renders a link to an external imprint page
BPA_IMPRINT_URL=

# Optional: If set bpa renders a link to an external pricavy policy page
BPA_PRIVACY_POLICY_URL=

# This will set the registry size when a credential definition is created with Support Revocation.
BPA_CREDDEF_REVOCATION_REGISTRY_SIZE=100

# Docker image to be used for the business partner
BPA_DOCKER_IMAGE=ghcr.io/hyperledger-labs/business-partner-agent:local
BPA_DOCKER_CONTEXT="../business-partner-agent"
# ------------------------------------------------------------
# ACA-PY
# ------------------------------------------------------------

# Run in read only mode, requires BPA_WEB_MODE to be true.
#ACAPY_READ_ONLY_MODE=--read-only-ledger

ACAPY_GENESIS_URL=https://indy-test.bosch-digital.de/genesis

#
# Identity
#

# Enter wallet seed here:
ACAPY1_SEED=JTOBKbRWXhdjwL1w1CJ0qtDoox9fCSD6
ACAPY2_SEED=fBePpliYFYWRste4ZEQQLOmYrL3I03kG

#
# Build
#

# Build ACA-Py instead of using a published image. Requires usage of docker-compose.custom-acapy.yml
# Example here is using the current master
ACAPY_BUILD_CONTEXT=https://github.com/hyperledger/aries-cloudagent-python.git
ACAPY_BUILD_DOCKERFILE_PATH=docker/Dockerfile.run

#
# Security
#

# Protect all admin endpoints with the provided API key
# Development setup (do not use in production!)
ACAPY_ADMIN_CONFIG=--admin-insecure-mode
# Production setup (change the key to a generated secret one)
#ACAPY_ADMIN_URL_API_KEY=change-me
#ACAPY_ADMIN_CONFIG=--admin-api-key ${ACAPY_ADMIN_URL_API_KEY}

#
# Connectivity
#

ACAPY1_SERVICE=partner-agent
ACAPY1_HTTP_PORT=38030
ACAPY1_ENDPOINT=http://host.docker.internal:38030
ACAPY1_ADMIN_PORT=38031

ACAPY2_SERVICE=dev-agent
ACAPY2_HTTP_PORT=48030
ACAPY2_ENDPOINT=http://host.docker.internal:48030
ACAPY2_ADMIN_PORT=48031

#
# Wallet Storage
#

ACAPY_WALLET_TYPE=postgres_storage
ACAPY_WALLET_DATABASE=wallet_db
ACAPY_WALLET_ENCRYPTION_KEY=key

# ------------------------------------------------------------
# Postgres Storage
# ------------------------------------------------------------

POSTGRESQL1_HOST=partner-wallet-db
POSTGRESQL1_PORT=35432

POSTGRESQL2_HOST=dev-wallet-db
POSTGRESQL2_PORT=45432

POSTGRESQL_USER=walletuser
POSTGRESQL_PASSWORD=walletpassword

BPA_KEYCLOAK_REDIRECT_URI=http://localhost:38080
BPA_KEYCLOAK_CLIENT_ID=bbcm-sherman-local
BPA_KEYCLOAK_CLIENT_SECRET=<REDACTED>
BPA_KEYCLOAK_ISSUER=https://dev.oidc.gov.bc.ca/auth/realms/digitaltrust
BPA_KEYCLOAK_ENDSESSION_URL=https://dev.oidc.gov.bc.ca/auth/realms/digitaltrust/protocol/openid-connect/logout
